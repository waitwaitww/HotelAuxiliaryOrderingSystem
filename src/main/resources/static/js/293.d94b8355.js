"use strict";(self["webpackChunkhotel"]=self["webpackChunkhotel"]||[]).push([[293],{6293:function(t,e,i){i.r(e),i.d(e,{default:function(){return p}});var s=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"register"}},[s("el-container",{staticStyle:{height:"868px"}},[s("el-header",{staticClass:"first-header",staticStyle:{display:"flex"}},[s("img",{staticStyle:{width:"13%",position:"relative",left:"10%"},attrs:{src:i(3182)}})]),s("el-main",{staticStyle:{position:"relative",height:"100%"}},[s("div",{staticClass:"register-container",staticStyle:{display:"flex",height:"100%"}},[s("div",{staticClass:"register",staticStyle:{position:"relative",width:"70%",left:"15%",height:"100%"}},[s("div",{staticClass:"step"},[s("el-steps",{attrs:{active:t.active,"finish-status":"success","align-center":"true"}},[s("el-step",{attrs:{title:"验证邮箱"}}),s("el-step",{attrs:{title:"填写账号"}}),s("el-step",{attrs:{title:"注册成功"}})],1)],1),s("div",{staticStyle:{position:"relative",top:"10%"}},[s("div",{staticClass:"grid-content bg-purple-light"},[s("div",{staticClass:"active1",staticStyle:{display:"inline",position:"relative",width:"70%",left:"15%"}},[1==t.active?s("div",{staticClass:"email",staticStyle:{width:"50%",display:"flex"}},[s("el-form",{ref:"form",attrs:{"label-width":"60px",rules:t.rules,model:t.registerform}},[s("el-form-item",{attrs:{label:"邮箱",prop:"email"}},[s("el-input",{model:{value:t.registerform.email,callback:function(e){t.$set(t.registerform,"email",e)},expression:"registerform.email"}})],1)],1)],1):t._e(),1==t.active?s("div",{staticClass:"codecontent",staticStyle:{width:"10%",display:"flex"}},[s("el-form",{ref:"form",attrs:{model:t.registerform,"label-width":"60px"}},[s("el-form-item",{attrs:{label:"验证码",prop:"testcode"}},[s("el-input",{model:{value:t.registerform.testcode,callback:function(e){t.$set(t.registerform,"testcode",e)},expression:"registerform.testcode"}}),s("el-button",{directives:[{name:"show",rawName:"v-show",value:t.show,expression:"show"}],on:{click:t.getCode}},[t._v("获取验证码")]),s("el-button",{directives:[{name:"show",rawName:"v-show",value:!t.show,expression:"!show"}],staticClass:"count"},[t._v(t._s(t.count)+" s")])],1)],1)],1):t._e()]),s("div",{staticClass:"active2",staticStyle:{display:"inline",position:"relative",width:"30%",left:"15%"}},[2==t.active?s("div",{staticClass:"pwdfirst",staticStyle:{width:"30%"}},[s("el-form",{ref:"form",attrs:{model:t.registerform,"label-width":"80px"}},[s("el-form-item",{attrs:{label:"密码",prop:"pwdfirst"}},[s("el-input",{attrs:{"show-password":""},model:{value:t.registerform.pwdfirst,callback:function(e){t.$set(t.registerform,"pwdfirst",e)},expression:"registerform.pwdfirst"}})],1)],1)],1):t._e(),2==t.active?s("div",{staticClass:"pwdagain",staticStyle:{width:"30%"}},[s("el-form",{ref:"form",attrs:{model:t.registerform,"label-width":"80px",rules:t.rules}},[s("el-form-item",{attrs:{label:"确认密码",prop:"pwdagain"}},[s("el-input",{attrs:{"show-password":""},model:{value:t.registerform.pwdagain,callback:function(e){t.$set(t.registerform,"pwdagain",e)},expression:"registerform.pwdagain"}})],1)],1)],1):t._e()]),3==t.active?s("div",{staticClass:"registersuccess",staticStyle:{display:"inline",position:"relative",height:"80%"}},[s("el-button",{staticStyle:{left:"30%",position:"relative"},attrs:{type:"success",plain:""},on:{click:t.returntomain}},[t._v("返回主界面")]),s("div",[s("span",{staticStyle:{left:"30%",position:"center","font-size":"50px"}},[t._v("注册成功！")])])],1):t._e()])]),s("div",{staticClass:"btn",staticStyle:{position:"relative",top:"20%"}},[1==t.active||2==t.active?s("el-button",{attrs:{type:"danger"},on:{click:t.verification}},[t._v("下一步")]):t._e()],1)])])])],1)],1)},r=[],a=(i(1703),i(9669)),l=i.n(a),o=i(4355),c={name:"Register",data(){var t=(t,e,i)=>{console.log(e),console.log(this.registerform.testcode),/^[A-Za-z0-9\u4e00-\u9fa5]+@[a-zA-Z0-9_-]+(\.[a-zA-Z0-9_-]+)+$/.test(e)?i():i(new Error("请输入正确的邮箱地址"))},e=(t,e,i)=>{console.log(this.registerform.pwdfirst),console.log(this.registerform.pwdagain),this.registerform.pwdfirst!=e?i(new Error("请确保输入的密码一致")):i()};return{show:!0,count:"",timer:null,active:3,input:"",testcode1:"",email1:"",registerform:{email:"",pwdfirst:"",pwdagain:"",testcode:"",testcodeuser:"@/"},rules:{email:[{validator:t,trigger:"blur"}],pwdagain:[{validator:e,trigger:"blur"}]}}},methods:{getCode(){const t=10;this.timer||(this.count=t,this.show=!1,this.timer=setInterval((()=>{this.count>0&&this.count<=t?this.count--:(this.show=!0,clearInterval(this.timer),this.timer=null)}),1e3)),l().post("back/user/register-first","email="+this.registerform.email).then((t=>{var e="";e=t.data.result,"用户已存在"==e?(alert("用户已存在，请重新输入邮箱！"),this.registerform.testcode=""):(console.log(e),this.registerform.testcodeuser=e)}))},verification(t){this.registerform,1===this.active?this.registerform.testcode===this.registerform.testcodeuser?this.active++:alert("验证码输入错误！"):2===this.active&&(this.registerform.pwdagain==this.registerform.pwdfirst?l().post("back/user/register-second","email="+this.registerform.email+"&upassword="+this.registerform.pwdagain).then((t=>{var e="";e=t.data.result,"success"==e?(alert("注册成功！"),this.active++):alert("添加用户失败")})):alert("两次密码不一致"))},returntomain(){o.Z.push("/main")}}},n=c,d=i(1001),f=(0,d.Z)(n,s,r,!1,null,"5f67e588",null),p=f.exports},3182:function(t,e,i){t.exports=i.p+"img/logo.f1454053.png"}}]);
//# sourceMappingURL=293.d94b8355.js.map