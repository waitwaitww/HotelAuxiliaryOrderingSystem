"use strict";(self["webpackChunkhotel"]=self["webpackChunkhotel"]||[]).push([[952],{4952:function(e,t,a){a.r(t),a.d(t,{default:function(){return c}});var o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-menu",{staticClass:"el-menu-homepage",staticStyle:{"text-align":"left"},attrs:{mode:"horizontal","background-color":"#1F4B62","text-color":"#fff","active-text-color":"#ffd04b"}},[a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"点击回到主页",placement:"bottom"}},[a("el-menu-item",{staticStyle:{width:"180px",float:"left"},attrs:{index:"10"},on:{click:function(t){return e.backtoHomepage()}}},[e._v(" 回到主页 ")])],1)],1),a("el-container",{staticStyle:{height:"calc(100vh - 80px)",border:"1px solid #eee"}},[a("el-aside",{staticStyle:{"background-color":"rgb(238, 241, 246)"},attrs:{width:"200px"}},[a("el-menu",{attrs:{"default-openeds":["1","3"]}},[a("el-submenu",{attrs:{index:"1"},scopedSlots:e._u([{key:"title",fn:function(){return[a("i",{staticClass:"el-icon-message"}),e._v("何")]},proxy:!0}])},[a("el-menu-item-group",[a("router-link",{attrs:{to:"/personinfo"}},[a("el-menu-item",{attrs:{index:"1-1"}},[e._v("用户信息")])],1),a("router-link",{attrs:{to:"/changeinfo"}},[a("el-menu-item",{attrs:{index:"1-2"}},[e._v("修改信息")])],1),a("el-submenu",{attrs:{index:"10"},scopedSlots:e._u([{key:"title",fn:function(){return[e._v(" 我的订单 ")]},proxy:!0}])},[a("el-menu-item",{attrs:{index:"20"}},[a("router-link",{attrs:{to:"/orderwaitpay"}},[e._v(" 待付款订单 ")])],1),a("el-menu-item",{attrs:{index:"30"}},[a("router-link",{attrs:{to:"/ordercheckedin"}},[e._v(" 已入住订单 ")])],1),a("el-menu-item",{attrs:{index:"40"}},[a("router-link",{attrs:{to:"/orderwillcancel"}},[e._v(" 待取消订单 ")])],1),a("el-menu-item",{attrs:{index:"50"}},[a("router-link",{attrs:{to:"/ordercanceled"}},[e._v(" 已取消订单 ")])],1)],1),a("router-view")],1)],1)],1)],1),a("el-container",[a("el-header",{staticStyle:{"text-align":"right","font-size":"12px"}},[a("router-link",{attrs:{to:"/personinfo"}},[e._v("回到首页")])],1),a("el-main",[a("el-table",{attrs:{data:e.tableData,"empty-text":"无待付款订单"}},[a("el-table-column",{attrs:{prop:"o_id",label:"订单号",width:"140"}}),a("el-table-column",{attrs:{prop:"u_id",label:"用户id",width:"140"}}),a("el-table-column",{attrs:{prop:"h_id",label:"酒店id",width:"140"}}),a("el-table-column",{attrs:{prop:"rtname",label:"房型id",width:"140"}}),a("el-table-column",{attrs:{prop:"Creat_time",label:"创建日期",width:"200"}}),a("el-table-column",{attrs:{prop:"state",label:"订单状态",width:"80"}}),a("el-table-column",{attrs:{prop:"option",label:"操作",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"warning",size:"mini"},on:{click:function(a){return e.payorder(t.row)}}},[e._v("立即支付")]),a("el-button",{attrs:{type:"info",size:"mini"},on:{click:function(a){return e.cancel(t.row)}}},[e._v("取消")])]}}])})],1)],1)],1)],1)],1)},r=[],s={name:"orderwaitpay",data(){return{item:[],tableData:[]}},methods:{backtoHomepage(){this.$router.push("/homepage")},getnotpaiedorderinfo(){const e=this;this.$axios({url:"/api/orderList/ListByState",method:"POST",params:{pageNo:1,pageSize:10,state:"待支付"}}).then((t=>{t.data.data&&(e.tableData=t.data.data)})).catch((e=>{console.log(e,"err")}))},openSuccess(){this.$message({showClose:!0,message:"支付成功",type:"success"})},openFail(){this.$message({showClose:!0,message:"支付失败",type:"error"})},opencancelSuccess(){this.$message({showClose:!0,message:"订单待取消，请等待审核",type:"success"})},opencancelFail(){this.$message({showClose:!0,message:"订单取消失败",type:"error"})},payorder(e){const t=this;this.$axios({url:"/api/orderList/UpdateState",method:"POST",params:{orderid:e.orderid,newstate:"已支付"}}).then((e=>{t.openSuccess()})).catch((e=>{t.openFail(),console.log(e,"err")})),this.$router.go(0)},cancel(e){const t=this;this.$axios({url:"/api/orderList/UpdateState",method:"POST",params:{orderid:e.orderid,newstate:"待取消"}}).then((e=>{t.opencancelSuccess()})).catch((e=>{t.opencancelFail(),console.log(e,"err")})),this.$router.go(0)}},created(){this.getnotpaiedorderinfo()}},l=s,n=a(1001),i=(0,n.Z)(l,o,r,!1,null,"dd31b6a2",null),c=i.exports}}]);
//# sourceMappingURL=952.9a4a3f87.js.map